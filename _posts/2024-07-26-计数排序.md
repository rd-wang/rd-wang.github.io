---
title: è®¡æ•°æ’åº
date: 2024-7-26 09:39:30 +0800
categories:
  - æ’åºç®—æ³•
tags:
  - æ’åº
  - ç®—æ³•
  - è®¡æ•°æ’åº
description:  è®¡æ•°æ’åºï¼ˆCounting sortï¼‰æ˜¯ä¸€ç§ç¨³å®šçš„çº¿æ€§æ—¶é—´æ’åºç®—æ³•ã€‚è¯¥ç®—æ³•äº1954å¹´ç”±[å“ˆç½—å¾·Â·HÂ·è¥¿åå¾·]æå‡ºã€‚è®¡æ•°æ’åºä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„æ•°ç»„ğ¶ï¼Œå…¶ä¸­ç¬¬iä¸ªå…ƒç´ æ˜¯å¾…æ’åºæ•°ç»„ğ´ä¸­å€¼ç­‰äºğ‘–çš„å…ƒç´ çš„ä¸ªæ•°ã€‚ç„¶åæ ¹æ®æ•°ç»„ğ¶æ¥å°†ğ´ä¸­çš„å…ƒç´ æ’åˆ°æ­£ç¡®çš„ä½ç½®ã€‚
math: true
---


# è®¡æ•°æ’åº

è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰æ˜¯ä¸€ç§çº¿æ€§æ—¶é—´å¤æ‚åº¦çš„æ’åºç®—æ³•ã€‚å®ƒé€‚ç”¨äºæ’åºä¸€å®šèŒƒå›´å†…çš„æ•´æ•°ï¼Œç‰¹åˆ«æ˜¯å½“èŒƒå›´ä¸å¤§æ—¶ï¼Œè¡¨ç°éå¸¸é«˜æ•ˆã€‚

## è®¡æ•°æ’åºçš„åŸç†

è®¡æ•°æ’åºçš„ä¸»è¦æ€æƒ³æ˜¯é€šè¿‡ç»Ÿè®¡æ¯ä¸ªå…ƒç´ çš„å‡ºç°æ¬¡æ•°ï¼Œè®¡ç®—å‡ºæ¯ä¸ªå…ƒç´ åœ¨æ’åºåæ•°ç»„ä¸­çš„ä½ç½®ï¼Œä»è€Œå®ç°æ’åºã€‚è®¡æ•°æ’åºé€‚ç”¨äºæ•°æ®èŒƒå›´ç›¸å¯¹è¾ƒå°ä¸”æ•°æ®åˆ†å¸ƒæ¯”è¾ƒå‡åŒ€çš„æƒ…å†µã€‚


## å›¾ç¤º

![è®¡æ•°æ’åº](https://rd-wang.github.io/assets/img/sort/counting_sort_overview.png)

![è®¡æ•°æ’åº](https://rd-wang.github.io/assets/img/sort/è®¡æ•°æ’åº.gif)

## è®¡æ•°æ’åºçš„æ­¥éª¤

1. **æ‰¾å‡ºæ•°ç»„ä¸­çš„æœ€å¤§å€¼å’Œæœ€å°å€¼**ï¼šç¡®å®šæ•°æ®çš„èŒƒå›´ã€‚
2. **åˆ›å»ºè®¡æ•°æ•°ç»„**ï¼šè®¡æ•°æ•°ç»„çš„å¤§å°ä¸ºæœ€å¤§å€¼å’Œæœ€å°å€¼ä¹‹é—´çš„å·®åŠ 1ï¼Œç”¨äºè®°å½•æ¯ä¸ªå…ƒç´ çš„å‡ºç°æ¬¡æ•°ã€‚
3. **ç»Ÿè®¡æ¯ä¸ªå…ƒç´ çš„å‡ºç°æ¬¡æ•°**ï¼šéå†å¾…æ’åºæ•°ç»„ï¼Œå¡«å……è®¡æ•°æ•°ç»„ã€‚
4. **è®¡ç®—å…ƒç´ çš„æœ€ç»ˆä½ç½®**ï¼šå¯¹è®¡æ•°æ•°ç»„è¿›è¡Œç´¯åŠ å¤„ç†ï¼Œå¾—åˆ°æ¯ä¸ªå…ƒç´ åœ¨æ’åºåæ•°ç»„ä¸­çš„ä½ç½®ã€‚**å‰ç¼€å’Œå…·æœ‰æ˜ç¡®çš„æ„ä¹‰ï¼Œ`prefix[num] - 1`Â ä»£è¡¨å…ƒç´ Â `num`Â åœ¨ç»“æœæ•°ç»„Â `res`Â ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•**ã€‚è¿™ä¸ªä¿¡æ¯éå¸¸å…³é”®ï¼Œå› ä¸ºå®ƒå‘Šè¯‰æˆ‘ä»¬å„ä¸ªå…ƒç´ åº”è¯¥å‡ºç°åœ¨ç»“æœæ•°ç»„çš„å“ªä¸ªä½ç½®ã€‚
5. **æ„å»ºè¾“å‡ºæ•°ç»„**ï¼šæ ¹æ®è®¡æ•°æ•°ç»„çš„ä¿¡æ¯ï¼Œå°†åŸæ•°ç»„çš„å…ƒç´ æ”¾åˆ°æ­£ç¡®çš„ä½ç½®ä¸Šã€‚
6. **å¤åˆ¶åˆ°åŸæ•°ç»„**ï¼šå°†è¾“å‡ºæ•°ç»„å¤åˆ¶å›åŸæ•°ç»„ï¼Œå®Œæˆæ’åºã€‚

## è®¡æ•°æ’åºç¤ºä¾‹
#### step1
![step1](https://rd-wang.github.io/assets/img/sort/counting_sort_step1.png)
#### step2
![step2](https://rd-wang.github.io/assets/img/sort/counting_sort_step2.png)
#### step3
![step3](https://rd-wang.github.io/assets/img/sort/counting_sort_step3.png)
#### step4
![step4](https://rd-wang.github.io/assets/img/sort/counting_sort_step4.png)
#### step5
![step5](https://rd-wang.github.io/assets/img/sort/counting_sort_step5.png)
#### step6
![step6](https://rd-wang.github.io/assets/img/sort/counting_sort_step6.png)
#### step7
![step7](https://rd-wang.github.io/assets/img/sort/counting_sort_step7.png)
#### step8
![step8](https://rd-wang.github.io/assets/img/sort/counting_sort_step8.png)


## å¤æ‚åº¦åˆ†æ

å½“è¾“å…¥çš„å…ƒç´ æ˜¯ğ‘›ä¸ª0åˆ°ğ‘˜ä¹‹é—´çš„æ•´æ•°æ—¶ï¼Œå®ƒçš„è¿è¡Œæ—¶é—´æ˜¯ $\Theta (n+k)$ã€‚è®¡æ•°æ’åºä¸æ˜¯æ¯”è¾ƒæ’åºï¼Œå› æ­¤ä¸è¢«Â $\Omega (n\log n)$çš„ä¸‹ç•Œé™åˆ¶ã€‚

- **æ—¶é—´å¤æ‚åº¦ä¸º $O(n + k)$ã€éè‡ªé€‚åº”æ’åº** ï¼šæ¶‰åŠéå† `nums` å’Œéå† `counte` ï¼Œéƒ½ä½¿ç”¨çº¿æ€§æ—¶é—´ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ $n \gg k$ ï¼Œæ—¶é—´å¤æ‚åº¦è¶‹äº $O(n)$ ã€‚
- **ç©ºé—´å¤æ‚åº¦ä¸º $O(n + k)$ã€éåŸåœ°æ’åº**ï¼šå€ŸåŠ©äº†é•¿åº¦åˆ†åˆ«ä¸º $n$ å’Œ $m$ çš„æ•°ç»„ `res` å’Œ `counte` ã€‚
- **ç¨³å®šæ’åº**ï¼šç”±äºå‘ `res` ä¸­å¡«å……å…ƒç´ çš„é¡ºåºæ˜¯â€œä»å³å‘å·¦â€çš„ï¼Œå› æ­¤å€’åºéå† `nums` å¯ä»¥é¿å…æ”¹å˜ç›¸ç­‰å…ƒç´ ä¹‹é—´çš„ç›¸å¯¹ä½ç½®ï¼Œä»è€Œå®ç°ç¨³å®šæ’åºã€‚å®é™…ä¸Šï¼Œæ­£åºéå† `nums` ä¹Ÿå¯ä»¥å¾—åˆ°æ­£ç¡®çš„æ’åºç»“æœï¼Œä½†ç»“æœæ˜¯éç¨³å®šçš„ã€‚


## æ—¶é—´å¤æ‚åº¦

- **æœ€ä½³æƒ…å†µ**ï¼š$O(n+k)$ã€‚ 
- **æœ€åæƒ…å†µ**ï¼š$O(n+k)$ã€‚ 
- **å¹³å‡æƒ…å†µ**ï¼š $O(n+k)$ã€‚
  
## ç©ºé—´å¤æ‚åº¦

- **ç©ºé—´å¤æ‚åº¦**ï¼š$O(n+k)$ã€‚

## å±€é™æ€§

è®¡æ•°æ’åºéå¸¸å·§å¦™ï¼Œä»…é€šè¿‡ç»Ÿè®¡æ•°é‡å°±å¯ä»¥å®ç°é«˜æ•ˆçš„æ’åºã€‚ç„¶è€Œï¼Œä½¿ç”¨è®¡æ•°æ’åºçš„å‰ç½®æ¡ä»¶ç›¸å¯¹è¾ƒä¸ºä¸¥æ ¼ã€‚

**è®¡æ•°æ’åºåªé€‚ç”¨äºéè´Ÿæ•´æ•°**ã€‚è‹¥æƒ³å°†å…¶ç”¨äºå…¶ä»–ç±»å‹çš„æ•°æ®ï¼Œéœ€è¦ç¡®ä¿è¿™äº›æ•°æ®å¯ä»¥è½¬æ¢ä¸ºéè´Ÿæ•´æ•°ï¼Œå¹¶ä¸”åœ¨è½¬æ¢è¿‡ç¨‹ä¸­ä¸èƒ½æ”¹å˜å„ä¸ªå…ƒç´ ä¹‹é—´çš„ç›¸å¯¹å¤§å°å…³ç³»ã€‚ä¾‹å¦‚ï¼Œå¯¹äºåŒ…å«è´Ÿæ•°çš„æ•´æ•°æ•°ç»„ï¼Œå¯ä»¥å…ˆç»™æ‰€æœ‰æ•°å­—åŠ ä¸Šä¸€ä¸ªå¸¸æ•°ï¼Œå°†å…¨éƒ¨æ•°å­—è½¬åŒ–ä¸ºæ­£æ•°ï¼Œæ’åºå®Œæˆåå†è½¬æ¢å›å»ã€‚

**è®¡æ•°æ’åºé€‚ç”¨äºæ•°æ®é‡å¤§ä½†æ•°æ®èŒƒå›´è¾ƒå°çš„æƒ…å†µ**ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ $k$ ä¸èƒ½å¤ªå¤§ï¼Œå¦åˆ™ä¼šå ç”¨è¿‡å¤šç©ºé—´ã€‚è€Œå½“ $n \ll k$ æ—¶ï¼Œè®¡æ•°æ’åºä½¿ç”¨ $O(k)$ æ—¶é—´ï¼Œå¯èƒ½æ¯” $O(n \log n)$ çš„æ’åºç®—æ³•è¿˜è¦æ…¢ã€‚

## Javaä»£ç å®ç°

```java
import java.util.Arrays;

public class CountingSort {

    public static void countingSort(int[] nums) {
        int n = nums.length;

        // æ‰¾å‡ºæ•°ç»„ä¸­çš„æœ€å¤§å€¼å’Œæœ€å°å€¼
        int max = Arrays.stream(nums).max().getAsInt();
        int min = Arrays.stream(nums).min().getAsInt();

        // åˆ›å»ºè®¡æ•°æ•°ç»„ï¼Œå¤§å°ä¸º (max - min + 1)
        int range = max - min + 1;
        // counter[num] ä»£è¡¨ num çš„å‡ºç°æ¬¡æ•°
        int[] counter = new int[range];
        // åˆå§‹åŒ–æ•°ç»„ res ç”¨äºè®°å½•ç»“æœ
        int[] res = new int[n];

        // ç»Ÿè®¡æ¯ä¸ªå…ƒç´ çš„å‡ºç°æ¬¡æ•°
        for (int num : nums) {
            counter[num - min]++;
        }

        // è®¡ç®—å…ƒç´ çš„æœ€ç»ˆä½ç½®ï¼ˆç´¯åŠ å¤„ç†ï¼‰
        // æ±‚ counter çš„å‰ç¼€å’Œï¼Œå°†â€œå‡ºç°æ¬¡æ•°â€è½¬æ¢ä¸ºâ€œå°¾ç´¢å¼•â€
        // å³ counter[num]-1 æ˜¯ num åœ¨ res ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•
        for (int i = 1; i < counter.length; i++) {
            counter[i] += counter[i - 1];
        }
		
        // å€’åºéå† arr ï¼Œå°†å„å…ƒç´ å¡«å…¥ç»“æœæ•°ç»„ res 
        for (int i = n - 1; i >= 0; i--) {
	        int num = nums[i] - min; 
	        // å°† num æ”¾ç½®åˆ°å¯¹åº”ç´¢å¼•å¤„ 
	        res[counter[num] - 1] = num;
	        // ä»¤å‰ç¼€å’Œè‡ªå‡ 1 ï¼Œå¾—åˆ°ä¸‹æ¬¡æ”¾ç½® num çš„ç´¢å¼• 
	        counter[num]--; 
        }

        // å°†è¾“å‡ºæ•°ç»„å¤åˆ¶å›åŸæ•°ç»„
        System.arraycopy(res, 0, nums, 0, n);
    }

    public static void main(String[] args) {
        int[] arr = {4, 2, 2, 8, 3, 3, 1};
        System.out.println("Given Array:");
        System.out.println(Arrays.toString(arr));

        // è°ƒç”¨è®¡æ•°æ’åºå‡½æ•°
        countingSort(arr);

        System.out.println("Sorted Array:");
        System.out.println(Arrays.toString(arr));
    }
}
```
