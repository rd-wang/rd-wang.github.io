---
title: å †æ’åº
date: 2024-7-23 15:48:25 +0800
categories:
  - æ’åºç®—æ³•
tags:
  - æ’åº
  - ç®—æ³•
  - å †æ’åº
description:  å †æ’åºï¼ˆHeap Sortï¼‰æ˜¯ä¸€ç§åŸºäºå †çš„æ’åºç®—æ³•ï¼Œå…·æœ‰è¾ƒé«˜çš„æ•ˆç‡å’Œç¨³å®šæ€§ã€‚
math: true
---


# å †æ’åº

å †æ’åºï¼ˆHeap Sortï¼‰æ˜¯ä¸€ç§åŸºäºå †çš„æ’åºç®—æ³•ï¼Œå…·æœ‰è¾ƒé«˜çš„æ•ˆç‡å’Œç¨³å®šæ€§ã€‚å †æ’åºåˆ©ç”¨å †è¿™ç§å®Œå…¨äºŒå‰æ ‘çš„æ•°æ®ç»“æ„è¿›è¡Œæ’åºï¼Œå¸¸ç”¨çš„æ˜¯å¤§é¡¶å †ï¼ˆæœ€å¤§å †ï¼‰æ¥å®ç°å‡åºæ’åºã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å †æ’åºçš„åŸç†ã€æ­¥éª¤ã€ç¤ºä¾‹ã€å¤æ‚åº¦åˆ†æåŠå…¶Javaä»£ç å®ç°ã€‚

## å †æ’åºçš„åŸç†

1. **å †çš„å®šä¹‰**ï¼š[å †](https://rd-wang.github.io/posts/å †/)æ˜¯ä¸€ç§å®Œå…¨äºŒå‰æ ‘ï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¤§äºæˆ–ç­‰äºå…¶å·¦å³å­èŠ‚ç‚¹çš„å€¼ï¼Œè¿™ç§å †ç§°ä¸ºå¤§é¡¶å †ï¼›æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å°äºæˆ–ç­‰äºå…¶å·¦å³å­èŠ‚ç‚¹çš„å€¼ï¼Œè¿™ç§å †ç§°ä¸ºå°é¡¶å †ã€‚
2. é€šå¸¸å †æ˜¯é€šè¿‡ä¸€ç»´[æ•°ç»„]æ¥å®ç°çš„ã€‚åœ¨æ•°ç»„èµ·å§‹ä½ç½®ä¸º0çš„æƒ…å½¢ä¸­ï¼š

- çˆ¶èŠ‚ç‚¹içš„å·¦å­èŠ‚ç‚¹åœ¨ä½ç½®$(2ğ‘–+1)$;
- çˆ¶èŠ‚ç‚¹içš„å³å­èŠ‚ç‚¹åœ¨ä½ç½®$(2ğ‘–+2)$;
- å­èŠ‚ç‚¹içš„çˆ¶èŠ‚ç‚¹åœ¨ä½ç½®$(ğ‘–âˆ’1)/2$;
3. **å †æ’åºçš„åŸºæœ¬æ€æƒ³**ï¼š
   - å°†å¾…æ’åºçš„æ•°ç»„æ„é€ æˆä¸€ä¸ªå¤§é¡¶å †ã€‚
   - å–å‡ºå †é¡¶å…ƒç´ ï¼ˆå½“å‰å †ä¸­æœ€å¤§å€¼ï¼‰ï¼Œå°†å…¶ä¸å †çš„æœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ã€‚
   - è°ƒæ•´å †ç»“æ„ï¼Œä½¿å…¶æ»¡è¶³å †çš„æ€§è´¨ï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤ç›´åˆ°æ•´ä¸ªæ•°ç»„æ’åºå®Œæˆã€‚

## å †æ’åºçš„æ­¥éª¤

1. **æ„å»ºåˆå§‹å †**ï¼šå°†æ— åºæ•°ç»„æ„å»ºæˆä¸€ä¸ªå¤§é¡¶å †ã€‚
2. **äº¤æ¢å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ **ï¼šå°†å †é¡¶å…ƒç´ ï¼ˆæœ€å¤§å€¼ï¼‰ä¸æœ«å°¾å…ƒç´ äº¤æ¢ã€‚
3. **è°ƒæ•´å †**ï¼šå°†å‰©ä½™å…ƒç´ é‡æ–°è°ƒæ•´ä¸ºå¤§é¡¶å †ã€‚
4. é‡å¤æ­¥éª¤2å’Œ3ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ æœ‰åºã€‚

## å›¾ç¤º

![å †æ’åº](https://rd-wang.github.io/assets/img/sort/å †æ’åº.gif)

## ç¤ºä¾‹

![å †æ’åºç¤ºä¾‹](https://rd-wang.github.io/assets/img/sort/heap_sort_example.webp)

## æ—¶é—´å¤æ‚åº¦

- **æ‰€æœ‰æ—¶é—´å¤æ‚åº¦**ï¼š $O(n \log n)$ã€‚
  
## ç©ºé—´å¤æ‚åº¦

 - **ç©ºé—´å¤æ‚åº¦**ï¼š$O(1)$

## å †æ’åºçš„ä»£ç å®ç°ï¼ˆJavaï¼‰

```java
public class HeapSort {

    // ä¸»æ’åºå‡½æ•°
    public static void heapSort(int[] arr) {
        int n = arr.length;

        // æ„å»ºåˆå§‹å¤§é¡¶å †,ä»éå¶å­ç»“ç‚¹çš„å…ƒç´ å¤„å¼€å§‹éå†
        for (int i = n / 2 - 1; i >= 0; i--) {
            heapify(arr, n, i);
        }

        // é€æ­¥å°†å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ äº¤æ¢ï¼Œå¹¶è°ƒæ•´å †
        for (int i = n - 1; i > 0; i--) {
            // å°†å½“å‰å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ äº¤æ¢
            int temp = arr[0];
            arr[0] = arr[i];
            arr[i] = temp;

            // è°ƒæ•´å †
            heapify(arr, i, 0);
        }
    }

    // è°ƒæ•´å †
    public static void heapify(int[] arr, int n, int i) {
        int largest = i; // å½“å‰èŠ‚ç‚¹
        int left = 2 * i + 1; // å·¦å­èŠ‚ç‚¹
        int right = 2 * i + 2; // å³å­èŠ‚ç‚¹

        // å¦‚æœå·¦å­èŠ‚ç‚¹å¤§äºå½“å‰èŠ‚ç‚¹ï¼Œåˆ™æ›´æ–°æœ€å¤§å€¼
        if (left < n && arr[left] > arr[largest]) {
            largest = left;
        }

        // å¦‚æœå³å­èŠ‚ç‚¹å¤§äºå½“å‰èŠ‚ç‚¹ï¼Œåˆ™æ›´æ–°æœ€å¤§å€¼
        if (right < n && arr[right] > arr[largest]) {
            largest = right;
        }

        // å¦‚æœæœ€å¤§å€¼ä¸æ˜¯å½“å‰èŠ‚ç‚¹ï¼Œåˆ™äº¤æ¢ï¼Œå¹¶é€’å½’è°ƒæ•´å †
        if (largest != i) {
            int swap = arr[i];
            arr[i] = arr[largest];
            arr[largest] = swap;
			//å¦‚æœäº¤æ¢äº†,éœ€è¦ç¡®è®¤è¢«äº¤æ¢çš„å¶å­èŠ‚ç‚¹ä»ç„¶æ˜¯ä¸ªå¤§é¡¶å †
            heapify(arr, n, largest);
        }
    }

    // ä¸»å‡½æ•°
    public static void main(String[] args) {
        int[] arr = {38, 27, 43, 3, 9, 82, 10};
        System.out.println("Given Array:");
        for (int num : arr) {
            System.out.print(num + " ");
        }
        System.out.println();

        // è°ƒç”¨å †æ’åºå‡½æ•°
        heapSort(arr);

        System.out.println("\nSorted Array:");
        for (int num : arr) {
            System.out.print(num + " ");
        }
        System.out.println();
    }
}

```
