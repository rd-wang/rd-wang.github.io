---
title: Dartç±»å‹
date: 2024-9-23 09:39:34 +0800
categories:
  - dart
tags:
  - dart
  - flutter
description: 
math: true
---
> [Dartè¯­è¨€è¯¦è§£](https://rd-wang.github.io/posts/DartåŸºç¡€æ¦‚å¿µå’Œå†…éƒ¨åŸç†/)

# Dart è¯­è¨€æ”¯æŒä»¥ä¸‹ç±»å‹ï¼š

- Numbers(`int`,Â `double`)
- StringsÂ (`String`)
- BooleansÂ (`bool`)
- RecordsÂ (`(value1, value2)`)
- Lists (`List`, also known asÂ _arrays_)
- SetsÂ (`Set`)
- MapsÂ (`Map`)
- RunesÂ (`Runes`; often replaced by theÂ `characters`Â API)
- SymbolsÂ (`Symbol`)
- The valueÂ `null`Â (`Null`)

è¿™äº›ç±»å‹éƒ½å¯ä»¥è¢«åˆå§‹åŒ–ä¸ºå­—é¢é‡ã€‚ ä¾‹å¦‚, `'this is a string' `æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­—é¢é‡ï¼Œ `true` æ˜¯ä¸€ä¸ªå¸ƒå°”çš„å­—é¢é‡ã€‚

ç”±äº Dart ä¸­çš„æ¯ä¸ªå˜é‡éƒ½å¼•ç”¨ä¸€ä¸ªå¯¹è±¡ï¼ˆä¸€ä¸ªç±»çš„å®ä¾‹ï¼‰ï¼Œæ‰€ä»¥å˜é‡å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ã€‚ ä¸€äº›å†…ç½®ç±»å‹æ‹¥æœ‰è‡ªå·±çš„æ„é€ å‡½æ•°ã€‚ ä¾‹å¦‚ï¼Œ é€šè¿‡ `Map()` æ¥æ„é€ ä¸€ä¸ª map å˜é‡ã€‚

å…¶ä»–ä¸€äº›ç±»å‹åœ¨ Dart è¯­è¨€ä¸­ä¹Ÿæœ‰ç‰¹æ®Šä½œç”¨ï¼š

- `Object`ï¼šé™¤`Null`ä¹‹å¤–çš„æ‰€æœ‰ Dart ç±»çš„è¶…ç±»ã€‚
- `Enum`ï¼šæ‰€æœ‰æšä¸¾çš„è¶…ç±»ã€‚
- `Future`å’Œ`Stream`ï¼šç”¨äºå¼‚æ­¥æ”¯æŒã€‚
- `Iterable`ï¼šç”¨äºfor-in å¾ªç¯å’ŒåŒæ­¥ç”Ÿæˆå™¨å‡½æ•°ã€‚
- `Never`ï¼šè¡¨ç¤ºè¡¨è¾¾å¼æ°¸è¿œæ— æ³•æˆåŠŸå®Œæˆæ±‚å€¼ã€‚æœ€å¸¸ç”¨äºæ€»æ˜¯æŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°ã€‚
- `dynamic`ï¼šè¡¨ç¤ºè¦ç¦ç”¨é™æ€æ£€æŸ¥ã€‚é€šå¸¸åº”ä½¿ç”¨`Object`æˆ–`Object?`ä»£æ›¿ã€‚
- `void`ï¼šè¡¨ç¤ºä»æœªä½¿ç”¨è¿‡è¯¥å€¼ã€‚é€šå¸¸ç”¨ä½œè¿”å›ç±»å‹ã€‚

`Object`ã€`Object?`ã€`Null`å’Œç±»åœ¨ç±»å±‚æ¬¡ç»“æ„ä¸­å…·æœ‰ç‰¹æ®Šè§’è‰²ã€‚
# åŸºæœ¬ç±»å‹
## Number
Dart è¯­è¨€çš„ Number æœ‰ä¸¤ç§ç±»å‹:

- int
æ•´æ•°å€¼ä¸å¤§äº64ä½ï¼Œ å…·ä½“å–å†³äºå¹³å°ã€‚
  - åœ¨ Dart VM ä¸Šï¼Œ å€¼çš„èŒƒå›´ä» $-2 ^{63}$ åˆ° $2 ^{63} - 1$. 
  - åœ¨ Web ä¸Šï¼Œæ•´æ•°å€¼è¡¨ç¤ºä¸º JavaScript æ•°å­—ï¼ˆæ²¡æœ‰å°æ•°éƒ¨åˆ†çš„ 64 ä½æµ®ç‚¹å€¼ï¼‰, å€¼çš„èŒƒå›´ä»$-2 ^{53}$ åˆ° $2 ^{53} - 1$.

- double
64ä½ï¼ˆåŒç²¾åº¦ï¼‰æµ®ç‚¹æ•°ï¼Œä¾æ® IEEE 754 æ ‡å‡†ã€‚

`int `å’Œ `double` éƒ½æ˜¯ `num`çš„å­ç±»ã€‚ num ç±»å‹åŒ…æ‹¬åŸºæœ¬è¿ç®— +ï¼Œ -ï¼Œ /ï¼Œ å’Œ *ï¼Œ ä»¥åŠ `abs()`ï¼Œ `ceil()`ï¼Œ å’Œ `floor()`ï¼Œ ç­‰å‡½æ•°æ–¹æ³•ã€‚ ï¼ˆæŒ‰ä½è¿ç®—ç¬¦ï¼Œä¾‹å¦‚Â»ï¼Œå®šä¹‰åœ¨ int ç±»ä¸­ã€‚ï¼‰ å¦‚æœ num åŠå­ç±»æ‰¾ä¸åˆ°ä½ æƒ³è¦çš„æ–¹æ³•ï¼Œ å°è¯•æŸ¥æ‰¾ä½¿ç”¨ `dart:math` åº“ã€‚

æ•´æ•°ç±»å‹ä¸åŒ…å«å°æ•°ç‚¹ã€‚
```dart
var x = 1;
var hex = 0xDEADBEEF;
```
å¦‚æœæ•°å­—åŒ…å«å°æ•°ï¼Œåˆ™å®ƒæ˜¯åŒç²¾åº¦æ•°ã€‚
```dart
var y = 1.1;
var exponents = 1.42e5;
```
è¿˜å¯ä»¥å°†å˜é‡å£°æ˜ä¸º numã€‚å¦‚æœè¿™æ ·åšï¼Œå˜é‡å¯ä»¥åŒæ—¶å…·æœ‰æ•´æ•°å’ŒåŒç²¾åº¦å€¼ã€‚
```dart
num x = 1; // x can have both int and double values
x += 2.5;
```
ä» Dart 2.1 å¼€å§‹ï¼Œå¿…è¦çš„æ—¶å€™ int å­—é¢é‡ä¼šè‡ªåŠ¨è½¬æ¢æˆ double ç±»å‹ã€‚

```dart
double z = 1; // ç›¸å½“äº double z = 1.0.
```
>ç‰ˆæœ¬æç¤ºï¼š åœ¨ 2.1 ä¹‹å‰ï¼Œåœ¨ double ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ int å­—é¢é‡æ˜¯é”™è¯¯çš„ã€‚

ä»¥ä¸‹æ˜¯å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—çš„æ–¹æ³•ï¼Œåä¹‹äº¦ç„¶ï¼š
```dart
// String -> int
var one = int.parse('1');
assert(one == 1);

// String -> double
var onePointOne = double.parse('1.1');
assert(onePointOne == 1.1);

// int -> String
String oneAsString = 1.toString();
assert(oneAsString == '1');

// double -> String
String piAsString = 3.14159.toStringAsFixed(2);
assert(piAsString == '3.14');
```
`int`ç±»å‹æŒ‡å®šä¼ ç»Ÿçš„ä½ç§»ä½ï¼ˆ`<<`,Â `>>`,Â `>>>`ï¼‰ã€è¡¥ç ï¼ˆ`~`ï¼‰ã€ä¸ï¼ˆ`&`ï¼‰ã€æˆ–ï¼ˆ`|`ï¼‰å’Œå¼‚æˆ–ï¼ˆ`^`ï¼‰è¿ç®—ç¬¦ï¼Œè¿™äº›è¿ç®—ç¬¦å¯¹äºæ“ä½œå’Œå±è”½ä½å­—æ®µä¸­çš„æ ‡å¿—å¾ˆæœ‰ç”¨ã€‚
```dart
assert((3 << 1) == 6); // 0011 << 1 == 0110
assert((3 >> 1) == 1); // 0011 >> 1 == 0001
assert((3 | 4) == 7); // 0011 | 0100 == 0111
```
æ•°å­—ç±»å‹å­—é¢é‡æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚ åœ¨ç®—æœ¯è¡¨è¾¾å¼ä¸­ï¼Œåªè¦å‚ä¸è®¡ç®—çš„å› å­æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œ é‚£ä¹ˆç®—æœ¯è¡¨è¾¾å¼çš„ç»“æœä¹Ÿæ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚
```dart
const msPerSecond = 1000;
const secondsUntilRetry = 5;
const msUntilRetry = secondsUntilRetry * msPerSecond;
```
## String

Dart å­—ç¬¦ä¸²æ˜¯ä¸€ç»„ï¼ˆ`String`å¯¹è±¡ï¼‰ UTF-16 å•å…ƒåºåˆ—ã€‚ å­—ç¬¦ä¸²é€šè¿‡å•å¼•å·æˆ–è€…åŒå¼•å·åˆ›å»ºã€‚
```dart
var s1 = 'Single quotes work well for string literals.';
var s2 = "Double quotes work just as well.";
var s3 = 'It\'s easy to escape the string delimiter.';
var s4 = "It's even easier to use the other delimiter.";
```
å­—ç¬¦ä¸²å¯ä»¥é€šè¿‡` ${expression}` çš„æ–¹å¼å†…åµŒè¡¨è¾¾å¼ã€‚ å¦‚æœè¡¨è¾¾å¼æ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œåˆ™ {} å¯ä»¥çœç•¥ã€‚ åœ¨ Dart ä¸­é€šè¿‡è°ƒç”¨å°±å¯¹è±¡çš„` toString() `æ–¹æ³•æ¥å¾—åˆ°å¯¹è±¡ç›¸åº”çš„å­—ç¬¦ä¸²ã€‚
```dart
var s = 'string interpolation';

assert('Dart has $s, which is very handy.' ==
    'Dart has string interpolation, ' +
        'which is very handy.');
assert('That deserves all caps. ' +
        '${s.toUpperCase()} is very handy!' ==
    'That deserves all caps. ' +
        'STRING INTERPOLATION is very handy!');
```
>æç¤ºï¼šå¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²åŒ…å«ç›¸åŒçš„ä»£ç å•å…ƒåºåˆ—ï¼Œåˆ™å®ƒä»¬æ˜¯ç›¸ç­‰çš„ã€‚

ä½¿ç”¨ç›¸é‚»çš„å­—ç¬¦ä¸²æ–‡å­—æˆ–`+`Â è¿ç®—ç¬¦è¿æ¥å­—ç¬¦ä¸²ï¼š
```dart
var s1 = 'String '
    'concatenation'
    " works even over line breaks.";
assert(s1 ==
    'String concatenation works even over '
    'line breaks.');

var s2 = 'The + operator ' + 'works, as well.';
assert(s2 == 'The + operator works, as well.');
```
ä½¿ç”¨å¸¦æœ‰å•å¼•å·æˆ–åŒå¼•å·çš„ä¸‰é‡å¼•å·ï¼Œåˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²ï¼š
```dart
var s1 = '''
You can create
multi-line strings like this one.
''';

var s2 = """This is also a
multi-line string.""";
```
ä½¿ç”¨ r å‰ç¼€ï¼Œå¯ä»¥åˆ›å»º â€œåŸå§‹ rawâ€ å­—ç¬¦ä¸²ï¼š
```dart
var s = r'In a raw string, not even \n gets special treatment.';
```
å‚è€ƒ Runes æ¥äº†è§£å¦‚ä½•åœ¨å­—ç¬¦ä¸²ä¸­è¡¨è¾¾ Unicode å­—ç¬¦ã€‚

ä¸€ä¸ªç¼–è¯‘æ—¶å¸¸é‡çš„å­—é¢é‡å­—ç¬¦ä¸²ä¸­ï¼Œå¦‚æœå­˜åœ¨æ’å€¼è¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼å†…å®¹ä¹Ÿæ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œ é‚£ä¹ˆè¯¥å­—ç¬¦ä¸²ä¾æ—§æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚ æ’å…¥çš„å¸¸é‡å€¼ç±»å‹å¯ä»¥æ˜¯ nullï¼Œæ•°å€¼ï¼Œå­—ç¬¦ä¸²æˆ–å¸ƒå°”å€¼ã€‚
```dart
// const ç±»å‹æ•°æ®
const aConstNum = 0;
const aConstBool = true;
const aConstString = 'a constant string';

// é const ç±»å‹æ•°æ®
var aNum = 0;
var aBool = true;
var aString = 'a string';
const aConstList = [1, 2, 3];

const validConstString = '$aConstNum $aConstBool $aConstString'; //const ç±»å‹æ•°æ®
// const invalidConstString = '$aNum $aBool $aString $aConstList'; //é const ç±»å‹æ•°æ®
```
æ›´å¤šå…³äº string çš„ä½¿ç”¨, å‚è€ƒ å­—ç¬¦ä¸²å’Œæ­£åˆ™è¡¨è¾¾å¼.

## Boolean
Dart ä½¿ç”¨ bool ç±»å‹è¡¨ç¤ºå¸ƒå°”å€¼ã€‚ Dart åªæœ‰å­—é¢é‡ `true `and `false` æ˜¯å¸ƒå°”ç±»å‹ï¼Œ è¿™ä¸¤ä¸ªå¯¹è±¡éƒ½æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚

Dart çš„ç±»å‹å®‰å…¨æ„å‘³ç€ä¸èƒ½ä½¿ç”¨` if (nonbooleanValue) `æˆ–è€… `assert (nonbooleanValue)`ã€‚ è€Œæ˜¯åº”è¯¥åƒä¸‹é¢è¿™æ ·ï¼Œæ˜ç¡®çš„è¿›è¡Œå€¼æ£€æŸ¥ï¼š
```dart
// æ£€æŸ¥ç©ºå­—ç¬¦ä¸²ã€‚
var fullName = '';
assert(fullName.isEmpty);

// æ£€æŸ¥ 0 å€¼ã€‚
var hitPoints = 0;
assert(hitPoints <= 0);

// æ£€æŸ¥ null å€¼ã€‚
var unicorn;
assert(unicorn == null);

// æ£€æŸ¥ NaN ã€‚
var iMeantToDoThis = 0 / 0;
assert(iMeantToDoThis.isNaN);
```

## Rune
åœ¨ Dart ä¸­ï¼Œ Rune ç”¨æ¥è¡¨ç¤ºå­—ç¬¦ä¸²ä¸­çš„ UTF-32 ç¼–ç å­—ç¬¦ã€‚

Unicode ä¸ºä¸–ç•Œä¸Šæ‰€æœ‰ä¹¦å†™ç³»ç»Ÿä¸­ä½¿ç”¨çš„æ¯ä¸ªå­—æ¯ã€æ•°å­—å’Œç¬¦å·å®šä¹‰äº†ä¸€ä¸ªå”¯ä¸€çš„æ•°å€¼ã€‚ç”±äº Dart å­—ç¬¦ä¸²æ˜¯ UTF-16 ä»£ç å•å…ƒçš„åºåˆ—ï¼Œå› æ­¤åœ¨å­—ç¬¦ä¸²ä¸­è¡¨è¾¾ Unicode ä»£ç ç‚¹éœ€è¦ç‰¹æ®Šçš„è¯­æ³•ã€‚

è¡¨ç¤º Unicode ç¼–ç çš„å¸¸ç”¨æ–¹æ³•æ˜¯ï¼Œ` \uXXXX`, è¿™é‡Œ XXXX æ˜¯ä¸€ä¸ª4ä½çš„16è¿›åˆ¶æ•°ã€‚ ä¾‹å¦‚ï¼Œå¿ƒå½¢ç¬¦å· (â™¥) æ˜¯ \u2665ã€‚ è¦æŒ‡å®šå¤šäºæˆ–å°‘äº 4 ä½åå…­è¿›åˆ¶æ•°å­—ï¼Œè¯·å°†å€¼æ”¾åœ¨èŠ±æ‹¬å·ä¸­ã€‚ä¾‹å¦‚ï¼Œç¬‘è„¸è¡¨æƒ…ç¬¦å· (ğŸ˜†) ä¸º`\u{1f606}`ã€‚

å¦‚æœéœ€è¦è¯»å–æˆ–å†™å…¥å•ä¸ª Unicode å­—ç¬¦ï¼Œä½¿ç”¨`characters` åŒ…åœ¨ String ä¸Šå®šä¹‰çš„characters getterã€‚è¿”å›çš„`Characters`å¯¹è±¡æ˜¯ä½œä¸ºå­—ç´ ç°‡åºåˆ—çš„å­—ç¬¦ä¸²ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨ characters API çš„ç¤ºä¾‹ï¼š
```dart
import 'package:characters/characters.dart';

void main() {
  var hi = 'Hi ğŸ‡©ğŸ‡°';
  print(hi);
  print('The end of the string: ${hi.substring(hi.length - 1)}');
  print('The last character: ${hi.characters.last}');
}
```

`String` ç±»æœ‰ä¸€äº›å±æ€§å¯ä»¥è·å¾— rune æ•°æ®ã€‚ å±æ€§ `codeUnitAt` å’Œ `codeUnit` è¿”å›16ä½ç¼–ç æ•°æ®ã€‚ å±æ€§` runes` è·å–å­—ç¬¦ä¸²ä¸­çš„ Rune ã€‚

ä¸‹é¢æ˜¯ç¤ºä¾‹æ¼”ç¤ºäº† Rune ã€ 16-bit code unitsã€ å’Œ 32-bit code points ä¹‹é—´çš„å…³ç³»ã€‚ 
```dart
main() {
  var clapping = '\u{1f44f}';
  print(clapping);
  print(clapping.codeUnits);
  print(clapping.runes.toList());

  Runes input = new Runes(
      '\u2665  \u{1f605}  \u{1f60e}  \u{1f47b}  \u{1f596}  \u{1f44d}');
  print(new String.fromCharCodes(input));
}
```

ğŸ‘
[55357, 56399]
[128079]
â™¥  ğŸ˜…  ğŸ˜  ğŸ‘»  ğŸ––  ğŸ‘


>æç¤ºï¼š è°¨æ…ä½¿ç”¨ list æ–¹å¼æ“ä½œ Rune ã€‚ è¿™ç§æ–¹æ³•å¾ˆå®¹æ˜“å¼•å‘å´©æºƒï¼Œ å…·ä½“åŸå› å–å†³äºç‰¹å®šçš„è¯­è¨€ï¼Œå­—ç¬¦é›†å’Œæ“ä½œã€‚ æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œå‚è€ƒ[How do I reverse a String in Dart?](https://stackoverflow.com/questions/21521729/how-do-i-reverse-a-string-in-dart)  on Stack Overflow.

## Symbol
ä¸€ä¸ª Symbol å¯¹è±¡è¡¨ç¤º Dart ç¨‹åºä¸­å£°æ˜çš„è¿ç®—ç¬¦æˆ–è€…æ ‡è¯†ç¬¦ã€‚ ä½ ä¹Ÿè®¸æ°¸è¿œéƒ½ä¸éœ€è¦ä½¿ç”¨ Symbol ï¼Œä½†è¦æŒ‰åç§°å¼•ç”¨æ ‡è¯†ç¬¦çš„ API æ—¶ï¼Œ Symbol å°±éå¸¸æœ‰ç”¨äº†ã€‚ å› ä¸ºä»£ç å‹ç¼©åä¼šæ”¹å˜æ ‡è¯†ç¬¦çš„åç§°ï¼Œä½†ä¸ä¼šæ”¹å˜æ ‡è¯†ç¬¦çš„ç¬¦å·ã€‚ é€šè¿‡å­—é¢é‡ Symbol ï¼Œä¹Ÿå°±æ˜¯æ ‡è¯†ç¬¦å‰é¢æ·»åŠ ä¸€ä¸ª # å·ï¼Œæ¥è·å–æ ‡è¯†ç¬¦çš„ Symbol ã€‚
```dart
#radix
#bar
```
Symbol å­—é¢é‡æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚
Symbol è¯¦ç»†è¯·å‚é˜…ï¼š[Dart åå°„](https://blog.csdn.net/rd_w_csdn/article/details/103926354)

# é›†åˆï¼ˆCollectionsï¼‰

## List
å‡ ä¹æ¯ç§ç¼–ç¨‹è¯­è¨€ä¸­æœ€å¸¸è§çš„é›†åˆå¯èƒ½æ˜¯æ•°ç»„ï¼Œå³æœ‰åºçš„å¯¹è±¡ç»„ã€‚ åœ¨ Dart ä¸­ï¼Œ *Array* å°±æ˜¯ `List` å¯¹è±¡ï¼Œ é€šå¸¸ç§°ä¹‹ä¸º List ã€‚

Dart ä¸­çš„ List å­—é¢é‡ç”±é€—å·åˆ†éš”çš„è¡¨è¾¾å¼æˆ–å€¼åˆ—è¡¨è¡¨ç¤ºï¼Œæ‹¬åœ¨æ–¹æ‹¬å· (Â `[]`) ä¸­ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ª Dart List çš„ç¤ºä¾‹ï¼š
```dart
var list = [1, 2, 3];
```
>æç¤ºï¼š Dart æ¨æ–­ list çš„ç±»å‹ä¸º List\<int> ã€‚ å¦‚æœå°è¯•å°†éæ•´æ•°å¯¹è±¡æ·»åŠ åˆ°æ­¤ List ä¸­ï¼Œ åˆ™åˆ†æå™¨æˆ–è¿è¡Œæ—¶ä¼šå¼•å‘é”™è¯¯ã€‚ 

Lists çš„ä¸‹æ ‡ç´¢å¼•ä» 0 å¼€å§‹ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•æ˜¯ 0ã€‚ list.length - 1 æ˜¯æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ã€‚ä½¿ç”¨å±æ€§è·å–åˆ—è¡¨çš„é•¿åº¦ï¼Œå¹¶ä½¿ç”¨ä¸‹æ ‡è¿ç®—ç¬¦ (Â )`.length`è®¿é—®åˆ—è¡¨çš„å€¼ï¼š`[]`
```dart
var list = [1, 2, 3];
assert(list.length == 3);
assert(list[1] == 2);

list[1] = 1;
assert(list[1] == 1);
```
åœ¨ List å­—é¢é‡ä¹‹å‰æ·»åŠ  const å…³é”®å­—ï¼Œå¯ä»¥å®šä¹‰ List ç±»å‹çš„ç¼–è¯‘æ—¶å¸¸é‡ï¼š
```dart
var constantList = const [1, 2, 3];
// constantList[1] = 1; // å–æ¶ˆæ³¨é‡Šä¼šå¼•èµ·é”™è¯¯ã€‚
```
Listçš„ä¸€äº›å¸¸ç”¨API
```dart
var list = [1, 2, 3];
assert(list[1] == 2);

list.add(value);
list.addAll(iterable);
list.insert(index, element);
list.insertAll(index, iterable);

list.remove(2);
list.removeAt(1);
list.removeRange(0, 5);
list.removeLast();
list.clear();

list.indexOf(element);
list.lastIndexOf(element);

list.removeWhere((item) => item > 3);
list.sort((a, b) => a.compareTo(b));
var l = list.reversed;
list.isNotEmpty;
list.isEmpty;
list.length;

```
## Set
åœ¨ Dart ä¸­ Set æ˜¯ä¸€ä¸ªå…ƒç´ å”¯ä¸€ä¸”æ— éœ€çš„é›†åˆã€‚ Dart ä¸º Set æä¾›äº† Set å­—é¢é‡å’Œ `Set` ç±»å‹ã€‚

ä¸‹é¢æ˜¯é€šè¿‡å­—é¢é‡åˆ›å»º Set çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼š
```dart
var halogens = {'fluorine', 'chlorine', 'bromine', 'iodine', 'astatine'};
```
>Note: Dart æ¨æ–­ halogens ç±»å‹ä¸º Set< String > ã€‚å¦‚æœå°è¯•ä¸ºå®ƒæ·»åŠ ä¸€ä¸ª é”™è¯¯ç±»å‹çš„å€¼ï¼Œåˆ†æå™¨æˆ–æ‰§è¡Œæ—¶ä¼šæŠ›å‡ºé”™è¯¯ã€‚

è¦åˆ›å»ºä¸€ä¸ªç©ºé›†ï¼Œä½¿ç”¨å‰é¢å¸¦æœ‰ç±»å‹å‚æ•°çš„` {} `ï¼Œæˆ–è€…å°†` {} `èµ‹å€¼ç»™ Set ç±»å‹çš„å˜é‡ï¼š

```dart
var names = <String>{};
// Set<String> names = {}; // è¿™æ ·ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚
// var names = {}; // è¿™æ ·ä¼šåˆ›å»ºä¸€ä¸ª Map ï¼Œè€Œä¸æ˜¯ Set ã€‚
```

>æ˜¯ Set è¿˜æ˜¯ Map ï¼Ÿ Map å­—é¢é‡è¯­æ³•åŒ Set å­—é¢é‡è¯­æ³•éå¸¸ç›¸ä¼¼ã€‚ å› ä¸ºå…ˆæœ‰çš„ Map å­—é¢é‡å…ˆå‡ºç°ï¼Œæ‰€ä»¥ {} é»˜è®¤æ˜¯ Map ç±»å‹ã€‚   å¦‚æœå¿˜è®°åœ¨ {} ä¸Šæ³¨é‡Šç±»å‹æˆ–èµ‹å€¼åˆ°ä¸€ä¸ªæœªå£°æ˜ç±»å‹çš„å˜é‡ä¸Šï¼Œ   é‚£ä¹ˆ Dart ä¼šåˆ›å»ºä¸€ä¸ªç±»å‹ä¸º Map<dynamic, dynamic> çš„å¯¹è±¡ã€‚


ä½¿ç”¨ `add()` æˆ– `addAll()` ä¸ºå·²æœ‰çš„ Set æ·»åŠ å…ƒç´ ï¼š
```dart
var elements = <String>{};
elements.add('fluorine');
elements.addAll(halogens);
```
ä½¿ç”¨ .length æ¥è·å– Set ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼š
```dart
var elements = <String>{};
elements.add('fluorine');
elements.addAll(halogens);
assert(elements.length == 5);
```
åœ¨ Set å­—é¢é‡å‰å¢åŠ  const ï¼Œæ¥åˆ›å»ºä¸€ä¸ªç¼–è¯‘æ—¶ Set å¸¸é‡ï¼š
```dart
final constantSet = const {
  'fluorine',
  'chlorine',
  'bromine',
  'iodine',
  'astatine',
};
// constantSet.add('helium'); // Uncommenting this causes an error.
```
Setçš„ä¸€äº›å¸¸ç”¨API
```dart
var set = Set();
set.add(value);
set.addAll(elements);
set.remove(value);
set.removeAll(elements);
set.removeWhere((item)=>item>3);
set.contains(value);
set.containsAll(other);
set.isNotEmpty;
set.isEmpty;
set.length;
set.difference(other);//è¿”å›ä¸€ä¸ªæ–°é›†åˆï¼Œè¯¥é›†åˆçš„å…ƒç´ ä¸åœ¨[other]ä¸­ã€‚
set.intersection(other);//è¿”å›ä¸€ä¸ªæ–°çš„é›†åˆï¼Œè¿™ä¸ªé›†åˆæ˜¯è¿™ä¸ªé›†åˆå’Œå…¶ä»–é›†åˆçš„äº¤é›†ã€‚
set.union(other);//è¿”å›ä¸€ä¸ªæ–°çš„é›†åˆï¼Œå…¶ä¸­åŒ…å«è¿™ä¸ªé›†åˆå’Œ[å…¶ä»–]çš„æ‰€æœ‰å…ƒç´ ã€‚
```

## Map
é€šå¸¸æ¥è¯´ï¼Œ Map æ˜¯ç”¨æ¥å…³è” keys å’Œ values çš„å¯¹è±¡ã€‚ keys å’Œ values å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ã€‚åœ¨ä¸€ä¸ª Map å¯¹è±¡ä¸­ä¸€ä¸ª key åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ ä½†æ˜¯ value å¯ä»¥å‡ºç°å¤šæ¬¡ã€‚ Dart ä¸­ Map é€šè¿‡ Map å­—é¢é‡ å’Œ Map ç±»å‹æ¥å®ç°ã€‚

ä¸‹é¢æ˜¯ä½¿ç”¨ Map å­—é¢é‡çš„ä¸¤ä¸ªç®€å•ä¾‹å­ï¼š
```dart
var gifts = {
  // Key:    Value
  'first': 'partridge',
  'second': 'turtledoves',
  'fifth': 'golden rings'
};

var nobleGases = {
  2: 'helium',
  10: 'neon',
  18: 'argon',
};
```
>æç¤ºï¼š Dart ä¼šå°† gifts çš„ç±»å‹æ¨æ–­ä¸º Map<String, String>ï¼Œ nobleGases çš„ç±»å‹æ¨æ–­ä¸º Map<int, String> ã€‚ å¦‚æœå°è¯•åœ¨ä¸Šé¢çš„ map ä¸­æ·»åŠ é”™è¯¯ç±»å‹ï¼Œé‚£ä¹ˆåˆ†æå™¨æˆ–è€…è¿è¡Œæ—¶ä¼šå¼•å‘é”™è¯¯ã€‚


ä»¥ä¸Š Map å¯¹è±¡ä¹Ÿå¯ä»¥ä½¿ç”¨ Map æ„é€ å‡½æ•°åˆ›å»ºï¼š
```dart
var gifts = Map();
gifts['first'] = 'partridge';
gifts['second'] = 'turtledoves';
gifts['fifth'] = 'golden rings';

var nobleGases = Map();
nobleGases[2] = 'helium';
nobleGases[10] = 'neon';
nobleGases[18] = 'argon';
```
æç¤º: è¿™é‡Œä¸ºä»€ä¹ˆåªæœ‰ `Map()` ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ `new Map()`ã€‚ å› ä¸ºåœ¨ Dart ä¸­ï¼Œ`new` å…³é”®å­—æ˜¯å¯é€‰çš„ã€‚

ä½¿ç”¨ä¸‹æ ‡èµ‹å€¼è¿ç®—ç¬¦ `[]=`( ) å‘ç°æœ‰æ˜ å°„ä¸­æ·»åŠ æ–°çš„é”®å€¼å¯¹ï¼š
```dart
var gifts = {'first': 'partridge'};
gifts['fourth'] = 'calling birds'; // Add a key-value pair
```
ä½¿ç”¨ä¸‹æ ‡è¿ç®—ç¬¦ ( ) ä»æ˜ å°„ä¸­æ£€ç´¢å€¼`[]`
```dart
var gifts = {'first': 'partridge'};
assert(gifts['first'] == 'partridge');
```
å¦‚æœ Map ä¸­ä¸åŒ…å«æ‰€è¦æŸ¥æ‰¾çš„ keyï¼Œé‚£ä¹ˆ Map è¿”å› nullï¼š
```dart
var gifts = {'first': 'partridge'};
assert(gifts['fifth'] == null);
```
ä½¿ç”¨ .length è·å–å½“å‰ Map ä¸­çš„ key-value å¯¹æ•°é‡ï¼š
```dart
var gifts = {'first': 'partridge'};
gifts['fourth'] = 'calling birds';
assert(gifts.length == 2);
```
åˆ›å»º Map ç±»å‹è¿è¡Œæ—¶å¸¸é‡ï¼Œè¦åœ¨ Map å­—é¢é‡å‰åŠ ä¸Šå…³é”®å­— constã€‚
```dart
final constantMap = const {
  2: 'helium',
  10: 'neon',
  18: 'argon',
};

// constantMap[2] = 'Helium'; // å–æ¶ˆæ³¨é‡Šä¼šå¼•èµ·é”™è¯¯ã€‚
```
Map å¸¸ç”¨API
```java
var map = {'first': 'partridge'};
map['fourth'] = 'calling birds';
map.remove(key);
map.addAll(other);
map.addEntries(newEntries);
map.putIfAbsent(key, ifAbsent);//æŸ¥æ‰¾[key]çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™æ·»åŠ ä¸€ä¸ªæ–°å€¼ã€‚
map.remove(key);
map.removeWhere((key,value)=>{});
map.clear();
map.containsKey(key);
map.containsValue(value);
map.length;
map.isNotEmpty;
map.isEmpty;


```

## æ§åˆ¶æµè¿ç®—ç¬¦

Dart æä¾›äº†**collection if**Â andÂ **collection for**Â ä¾›åˆ—è¡¨ã€æ˜ å°„å’Œé›†åˆå­—é¢â€‹â€‹é‡ä½¿ç”¨. æ‚¨å¯ä»¥ä½¿ç”¨é€šè¿‡æ¡ä»¶(`if`)å’Œé‡å¤ (`for`)è¿™äº›è¿ç®—ç¬¦æ„å»ºé›†åˆã€‚
**collection if**
```dart
var nav = ['Home', 'Furniture', 'Plants', if (promoActive) 'Outlet'];
```
**if-case**
```dart
var nav = ['Home', 'Furniture', 'Plants', if (login case 'Manager') 'Inventory'];
```
**collection for**
```dart
var listOfInts = [1, 2, 3];
var listOfStrings = ['#0', for (var i in listOfInts) '#$i'];
assert(listOfStrings[1] == '#1');
```

# è®°å½• (Records)
éœ€è¦è‡³å°‘ 3.0 çš„[è¯­è¨€ç‰ˆæœ¬](https://dart.cn/guides/language/evolution#language-versioning)

è®°å½•æ˜¯ä¸€ç§åŒ¿åã€ä¸å¯å˜çš„èšåˆç±»å‹ã€‚ä¸å…¶ä»–é›†åˆç±»å‹ä¸€æ ·ï¼Œå®ƒä»¬å…è®¸å°†å¤šä¸ªå¯¹è±¡æ†ç»‘ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚ä¸å…¶ä»–é›†åˆç±»å‹ä¸åŒï¼Œè®°å½•æ˜¯å›ºå®šå¤§å°ã€å¼‚æ„ä¸”ç±»å‹åŒ–çš„ã€‚

è®°å½•æ˜¯çœŸå®å€¼ï¼›æ‚¨å¯ä»¥å°†å®ƒä»¬å­˜å‚¨åœ¨å˜é‡ä¸­ã€åµŒå¥—å®ƒä»¬ã€å°†å®ƒä»¬ä¼ é€’åˆ°å‡½æ•°æˆ–ä»å‡½æ•°ä¼ é€’å®ƒä»¬ï¼Œä»¥åŠå°†å®ƒä»¬å­˜å‚¨åœ¨åˆ—è¡¨ã€æ˜ å°„å’Œé›†åˆç­‰æ•°æ®ç»“æ„ä¸­ã€‚

## è®°å½•è¯­æ³•
_è®°å½•è¡¨è¾¾å¼_ æ˜¯ç”¨é€—å·åˆ†éš”çš„å‘½åæˆ–ä½ç½®å­—æ®µåˆ—è¡¨ï¼Œæ‹¬åœ¨æ‹¬å·ä¸­ï¼š

```dart
var record = ('first', a: 2, b: true, 'last');
```
_è®°å½•ç±»å‹æ³¨é‡Š_ æ˜¯ç”¨æ‹¬å·æ‹¬èµ·æ¥çš„é€—å·åˆ†éš”çš„ç±»å‹åˆ—è¡¨ã€‚å¯ä»¥ä½¿ç”¨è®°å½•ç±»å‹æ³¨é‡Šæ¥å®šä¹‰è¿”å›ç±»å‹å’Œå‚æ•°ç±»å‹ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹`(int, int)`è¯­å¥æ˜¯è®°å½•ç±»å‹æ³¨é‡Šï¼š

```dart
(int, int) swap((int, int) record) {
  var (a, b) = record;
  return (b, a);
}
```
è®°å½•è¡¨è¾¾å¼å’Œç±»å‹æ³¨é‡Šä¸­çš„å­—æ®µåæ˜ äº†å‡½æ•°ä¸­å‚æ•°å’Œå®å‚çš„å·¥ä½œæ–¹å¼ã€‚ä½ç½®å­—æ®µç›´æ¥ä½äºæ‹¬å·å†…ï¼š
```dart
// Record type annotation in a variable declaration:
(String, int) record;

// Initialize it with a record expression:
record = ('A string', 123);
```
åœ¨è®°å½•ç±»å‹æ³¨é‡Šä¸­ï¼Œå‘½åå­—æ®µä½äºæ‰€æœ‰ä½ç½®å­—æ®µä¹‹åï¼Œä½äºç±»å‹å’Œåç§°å¯¹çš„èŠ±æ‹¬å·åˆ†éš”éƒ¨åˆ†å†…ã€‚åœ¨è®°å½•è¡¨è¾¾å¼ä¸­ï¼Œåç§°ä½äºæ¯ä¸ªå­—æ®µå€¼ä¹‹å‰ï¼Œåé¢å¸¦æœ‰å†’å·ï¼š
```dart
// Record type annotation in a variable declaration:
({int a, bool b}) record;

// Initialize it with a record expression:
record = (a: 123, b: true);
```
è®°å½•ç±»å‹ä¸­å‘½åå­—æ®µçš„åç§°æ˜¯è®°å½•ç±»å‹å®šä¹‰æˆ–å…¶ _å½¢çŠ¶_ çš„ä¸€éƒ¨åˆ†ã€‚ä¸¤ä¸ªå…·æœ‰ä¸åŒåç§°çš„å‘½åå­—æ®µçš„è®°å½•å…·æœ‰ä¸åŒçš„ç±»å‹ï¼š
```dart
({int a, int b}) recordAB = (a: 1, b: 2);
({int x, int y}) recordXY = (x: 3, y: 4);

// Compile error! These records don't have the same type.
// recordAB = recordXY;
```
åœ¨è®°å½•ç±»å‹æ³¨é‡Šä¸­ï¼Œæ‚¨è¿˜å¯ä»¥å‘½å _ä½ç½®_ å­—æ®µï¼Œä½†è¿™äº›åç§°çº¯ç²¹ç”¨äºæ–‡æ¡£ï¼Œä¸ä¼šå½±å“è®°å½•çš„ç±»å‹ï¼š
```
(int a, int b) recordAB = (1, 2);
(int x, int y) recordXY = (3, 4);

recordAB = recordXY; // OK.
```
è¿™ç±»ä¼¼äºå‡½æ•°å£°æ˜æˆ–å‡½æ•° typedef ä¸­çš„ä½ç½®å‚æ•°å¯ä»¥æœ‰åç§°ï¼Œä½†è¿™äº›åç§°ä¸ä¼šå½±å“å‡½æ•°çš„ç­¾åã€‚

## è®°å½•å­—æ®µ
è®°å½•å­—æ®µå¯é€šè¿‡å†…ç½® getter è®¿é—®ã€‚è®°å½•æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤å­—æ®µæ²¡æœ‰ setterã€‚
å‘½åå­—æ®µä¼šå…¬å¼€åŒåçš„ getterã€‚ä½ç½®å­—æ®µä¼šå…¬å¼€åç§°ä¸º çš„ getterÂ `$<position>`ï¼Œè·³è¿‡å‘½åå­—æ®µï¼š
```dart
var record = ('first', a: 2, b: true, 'last');

print(record.$1); // Prints 'first'
print(record.a); // Prints 2
print(record.b); // Prints true
print(record.$2); // Prints 'last'
```

## è®°å½•ç±»å‹

å•ä¸ªè®°å½•ç±»å‹æ²¡æœ‰ç±»å‹å£°æ˜ã€‚è®°å½•æ ¹æ®å…¶å­—æ®µçš„ç±»å‹è¿›è¡Œç»“æ„åŒ–ç±»å‹åˆ’åˆ†ã€‚è®°å½•çš„ _å½¢çŠ¶_ï¼ˆå…¶å­—æ®µé›†ã€å­—æ®µç±»å‹åŠå…¶åç§°ï¼ˆå¦‚æœæœ‰ï¼‰ï¼‰å”¯ä¸€åœ°å†³å®šäº†è®°å½•çš„ç±»å‹ã€‚

è®°å½•ä¸­çš„æ¯ä¸ªå­—æ®µéƒ½æœ‰è‡ªå·±çš„ç±»å‹ã€‚åŒä¸€è®°å½•ä¸­çš„å­—æ®µç±»å‹å¯èƒ½ä¸åŒã€‚æ— è®ºä»è®°å½•ä¸­è®¿é—®å“ªä¸ªå­—æ®µï¼Œç±»å‹ç³»ç»Ÿéƒ½èƒ½è¯†åˆ«æ¯ä¸ªå­—æ®µçš„ç±»å‹ï¼š

```dart
(num, Object) pair = (42, 'a');

var first = pair.$1; // Static type `num`, runtime type `int`.
var second = pair.$2; // Static type `Object`, runtime type `String`.
```
å‡è®¾ä¸¤ä¸ªä¸ç›¸å…³çš„åº“åˆ›å»ºäº†å…·æœ‰ç›¸åŒå­—æ®µé›†çš„è®°å½•ã€‚å³ä½¿åº“ä¹‹é—´æ²¡æœ‰ç›¸äº’è€¦åˆï¼Œç±»å‹ç³»ç»Ÿä¹Ÿä¼šè®¤ä¸ºè¿™äº›è®°å½•å±äºåŒä¸€ç±»å‹ã€‚

## è®°å½•ç›¸ç­‰
å¦‚æœä¸¤ä¸ªè®°å½•å…·æœ‰ç›¸åŒçš„ _å½¢çŠ¶_ ï¼ˆå­—æ®µé›†ï¼‰ï¼Œå¹¶ä¸”å…¶å¯¹åº”å­—æ®µå…·æœ‰ç›¸åŒçš„å€¼ï¼Œåˆ™å®ƒä»¬ç›¸ç­‰ã€‚ç”±äºå‘½åå­—æ®µ _é¡ºåº_ ä¸æ˜¯è®°å½•å½¢çŠ¶çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤å‘½åå­—æ®µçš„é¡ºåºä¸ä¼šå½±å“ç›¸ç­‰æ€§ã€‚

```dart
(int x, int y, int z) point = (1, 2, 3);
(int r, int g, int b) color = (1, 2, 3);

print(point == color); // Prints 'true'.
```

```dart
({int x, int y, int z}) point = (x: 1, y: 2, z: 3);
({int r, int g, int b}) color = (r: 1, g: 2, b: 3);

print(point == color); // Prints 'false'. Lint: Equals on unrelated types.
```
è®°å½•ä¼šæ ¹æ®å…¶å­—æ®µçš„ç»“æ„è‡ªåŠ¨å®šä¹‰`hashCode`å’Œæ–¹æ³•ã€‚`==`

## å¤šæ¬¡è¿”å›
è®°å½•å…è®¸å‡½æ•°è¿”å›æ†ç»‘åœ¨ä¸€èµ·çš„å¤šä¸ªå€¼ã€‚è¦ä»è¿”å›ä¸­æ£€ç´¢è®°å½•å€¼ï¼Œ ä½¿ç”¨æ¨¡å¼åŒ¹é…å°†å€¼è§£æ„ä¸ºå±€éƒ¨å˜é‡ã€‚
```dart
// Returns multiple values in a record:
(String name, int age) userInfo(Map<String, dynamic> json) {
  return (json['name'] as String, json['age'] as int);
}

final json = <String, dynamic>{
  'name': 'Dash',
  'age': 10,
  'color': 'blue',
};

// Destructures using a record pattern with positional fields:
var (name, age) = userInfo(json);

/* Equivalent to:
  var info = userInfo(json);
  var name = info.$1;
  var age  = info.$2;
*/
```
æ‚¨è¿˜å¯ä»¥ä½¿ç”¨å†’å·è¯­æ³•ï¼Œé€šè¿‡å…¶å‘½åå­—æ®µæ¥è§£æ„è®°å½•
```dart
({String name, int age}) userInfo(Map<String, dynamic> json)
// Â·Â·Â·
// Destructures using a record pattern with named fields:
final (:name, :age) = userInfo(json);
```
æ‚¨å¯ä»¥ä»æ²¡æœ‰è®°å½•çš„å‡½æ•°è¿”å›å¤šä¸ªå€¼ï¼Œä½†å…¶ä»–æ–¹æ³•ä¹Ÿæœ‰ç¼ºç‚¹ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªç±»ä¼šæ›´åŠ å†—é•¿ï¼Œè€Œä½¿ç”¨å…¶ä»–é›†åˆç±»å‹ï¼ˆå¦‚`List`æˆ–ï¼‰`Map`ä¼šå¤±å»ç±»å‹å®‰å…¨æ€§ã€‚

# æ³›å‹(Generics)

å¦‚æœæ‚¨æŸ¥çœ‹åŸºæœ¬æ•°ç»„ç±»å‹çš„ API æ–‡æ¡£ï¼Œ`List`æ‚¨ä¼šå‘ç°è¯¥ç±»å‹å®é™…ä¸Šæ˜¯`List<E>`ã€‚ <...> ç¬¦å·å°† List æ ‡è®°ä¸º Â _é€šç”¨_ï¼ˆæˆ– _å‚æ•°åŒ–_ ï¼‰ç±»å‹ - å…·æœ‰æ­£å¼ç±»å‹å‚æ•°çš„ç±»å‹ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œå¤§å¤šæ•°ç±»å‹å˜é‡éƒ½æœ‰å•å­—æ¯åç§°ï¼Œä¾‹å¦‚ Eã€Tã€Sã€K å’Œ Vã€‚

## ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹ï¼Ÿ

æ³›å‹é€šå¸¸æ˜¯ç±»å‹å®‰å…¨æ‰€å¿…éœ€çš„ï¼Œä½†å®ƒä»¬çš„å¥½å¤„ä¸ä»…ä»…æ˜¯è®©ä½ çš„ä»£ç è¿è¡Œï¼š
- æ­£ç¡®æŒ‡å®šæ³›å‹ç±»å‹å¯ä»¥ç”Ÿæˆæ›´å¥½çš„ä»£ç ã€‚
- æ‚¨å¯ä»¥ä½¿ç”¨æ³›å‹æ¥å‡å°‘ä»£ç é‡å¤ã€‚

å¦‚æœæ‚¨å¸Œæœ›åˆ—è¡¨ä»…åŒ…å«å­—ç¬¦ä¸²ï¼Œåˆ™å¯ä»¥å°†å…¶å£°æ˜ä¸º`List<String>`ï¼ˆè¯»ä½œâ€œå­—ç¬¦ä¸²åˆ—è¡¨â€ï¼‰ã€‚è¿™æ ·ï¼Œæ‚¨ã€æ‚¨çš„ç¨‹åºå‘˜åŒäº‹å’Œæ‚¨çš„å·¥å…·å°±å¯ä»¥æ£€æµ‹åˆ°å°†éå­—ç¬¦ä¸²åˆ†é…ç»™åˆ—è¡¨å¯èƒ½æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¾‹å­ï¼š

```dart
âœ— é™æ€åˆ†æï¼šå¤±è´¥
var names = <String>[];
names.addAll(['Seth', 'Kathy', 'Lars']);
names.add(42); // Error
```
ä½¿ç”¨æ³›å‹çš„å¦ä¸€ä¸ªåŸå› æ˜¯å‡å°‘ä»£ç é‡å¤ã€‚æ³›å‹å…è®¸ä½ åœ¨å¤šç§ç±»å‹ä¹‹é—´å…±äº«å•ä¸ªæ¥å£å’Œå®ç°ï¼ŒåŒæ—¶ä»å¯åˆ©ç”¨é™æ€åˆ†æã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ åˆ›å»ºä¸€ä¸ªç”¨äºç¼“å­˜å¯¹è±¡çš„æ¥å£ï¼š
```dart
abstract class ObjectCache {
  Object getByKey(String key);
  void setByKey(String key, Object value);
}
```
æ‚¨å‘ç°æ‚¨éœ€è¦è¯¥æ¥å£çš„å­—ç¬¦ä¸²ç‰¹å®šç‰ˆæœ¬ï¼Œå› æ­¤æ‚¨åˆ›å»ºäº†å¦ä¸€ä¸ªæ¥å£ï¼š
```dart
abstract class StringCache {
  String getByKey(String key);
  void setByKey(String key, String value);
}
```
ç¨åï¼Œæ‚¨å†³å®šè¦ä½¿ç”¨è¿™ä¸ªç•Œé¢çš„ç‰¹å®šæ•°å­—ç‰ˆæœ¬...æ‚¨æ˜ç™½äº†ã€‚

æ³›å‹ç±»å‹å¯ä»¥çœå»åˆ›å»ºæ‰€æœ‰è¿™äº›æ¥å£çš„éº»çƒ¦ã€‚ç›¸åï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªé‡‡ç”¨ç±»å‹å‚æ•°çš„æ¥å£ï¼š
```dart
abstract class Cache<T> {
  T getByKey(String key);
  void setByKey(String key, T value);
}
```
T æ˜¯æ›¿ä»£ç±»å‹ã€‚å®ƒæ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œæ‚¨å¯ä»¥å°†å…¶è§†ä¸ºå¼€å‘äººå‘˜ç¨åå°†å®šä¹‰çš„ç±»å‹ã€‚

## ä½¿ç”¨é›†åˆå­—é¢é‡
åˆ—è¡¨ã€é›†åˆå’Œæ˜ å°„å­—é¢é‡å¯ä»¥å‚æ•°åŒ–ã€‚å‚æ•°åŒ–å­—é¢é‡å°±åƒæ‚¨å·²ç»è§è¿‡çš„å­—é¢é‡ä¸€æ ·ï¼Œåªæ˜¯æ‚¨åœ¨å·¦æ‹¬å·å‰æ·»åŠ äº†`<_type_>`ï¼ˆå¯¹äºåˆ—è¡¨å’Œé›†åˆï¼‰æˆ– `<_keyType_,Â _valueType_>`ï¼ˆå¯¹äºæ˜ å°„ï¼‰ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨ç±»å‹å­—é¢é‡çš„ç¤ºä¾‹ï¼š

```dart
var names = <String>['Seth', 'Kathy', 'Lars'];
var uniqueNames = <String>{'Seth', 'Kathy', 'Lars'};
var pages = <String, String>{
  'index.html': 'Homepage',
  'robots.txt': 'Hints for web robots',
  'humans.txt': 'We are people, not machines'
};
```
## å°†å‚æ•°åŒ–ç±»å‹ä¸æ„é€ å‡½æ•°ä¸€èµ·ä½¿ç”¨
è¦åœ¨ä½¿ç”¨æ„é€ å‡½æ•°æ—¶æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹ï¼Œè¯·å°†ç±»å‹æ”¾åœ¨ç±»ååé¢çš„å°–æ‹¬å· (`<...>` ) ä¸­ã€‚ä¾‹å¦‚ï¼š
```dart
var nameSet = Set<String>.from(names);
```
ä»¥ä¸‹ä»£ç åˆ›å»ºä¸€ä¸ªå…·æœ‰æ•´æ•°é”®å’Œ View ç±»å‹å€¼çš„æ˜ å°„ï¼š

```dart
var views = Map<int, View>();
```

## æ³›å‹é›†åˆåŠå…¶åŒ…å«çš„ç±»å‹
Dart æ³›å‹ç±»å‹æ˜¯ _å…·ä½“åŒ–çš„_ï¼Œè¿™æ„å‘³ç€å®ƒä»¬åœ¨è¿è¡Œæ—¶ä¼šæºå¸¦å…¶ç±»å‹ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥æµ‹è¯•é›†åˆçš„ç±»å‹ï¼š

```dart
var names = <String>[];
names.addAll(['Seth', 'Kathy', 'Lars']);
print(names is List<String>); // true
```
>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒJava ä¸­çš„æ³›å‹ä½¿ç”¨_æ“¦é™¤_ï¼Œè¿™æ„å‘³ç€æ³›å‹ç±»å‹å‚æ•°åœ¨è¿è¡Œæ—¶è¢«åˆ é™¤ã€‚åœ¨ Java ä¸­ï¼Œæ‚¨å¯ä»¥æµ‹è¯•ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ Listï¼Œä½†æ— æ³•æµ‹è¯•å®ƒæ˜¯å¦æ˜¯`List<String>`ã€‚

## é™åˆ¶å‚æ•°åŒ–ç±»å‹
å®ç°æ³›å‹ç±»å‹æ—¶ï¼Œæ‚¨å¯èƒ½å¸Œæœ›é™åˆ¶å¯ä»¥ä½œä¸ºå‚æ•°æä¾›çš„ç±»å‹ï¼Œä»¥ä¾¿å‚æ•°å¿…é¡»æ˜¯ç‰¹å®šç±»å‹çš„å­ç±»å‹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨`extends`æ¥å®ç°è¿™ä¸€ç‚¹ã€‚

ä¸€ä¸ªå¸¸è§çš„ç”¨ä¾‹æ˜¯ç¡®ä¿ç±»å‹ä¸å¯ç©ºï¼Œé€šè¿‡ä½¿å…¶æˆä¸ºçš„å­ç±»å‹`Object`Â ï¼ˆè€Œä¸æ˜¯é»˜è®¤çš„`Object?`ï¼‰ã€‚
```dart
class Foo<T extends Object> {
  // Any type provided to Foo for T must be non-nullable.
}
```
å¯ä»¥å°†`extends`ä¸é™¤äº†`Object`ä¹‹å¤–çš„å…¶ä»–ç±»å‹ä¸€èµ·ä½¿ç”¨ã€‚è¿™æ˜¯æ‰©å±• SomeBaseClass çš„ç¤ºä¾‹ï¼Œä»¥ä¾¿å¯ä»¥åœ¨`T`ç±»å‹çš„å¯¹è±¡ä¸Šè°ƒç”¨`SomeBaseClass`çš„æˆå‘˜ï¼š
```dart
class Foo<T extends SomeBaseClass> {
  // Implementation goes here...
  String toString() => "Instance of 'Foo<$T>'";
}

class Extender extends SomeBaseClass {...}
```
å¯ä»¥ä½¿ç”¨`SomeBaseClass`æˆ–å…¶ä»»ä½•å­ç±»å‹ä½œä¸ºæ³›å‹å‚æ•°ï¼š
```dart
var someBaseClassFoo = Foo<SomeBaseClass>();
var extenderFoo = Foo<Extender>();
```
ä¸æŒ‡å®šé€šç”¨å‚æ•°ä¹Ÿæ˜¯å¯ä»¥çš„ï¼š
```dart
var foo = Foo();
print(foo); // Instance of 'Foo<SomeBaseClass>'
```
æŒ‡å®šä»»ä½•é`SomeBaseClass`ç±»å‹éƒ½ä¼šå¯¼è‡´é”™è¯¯ï¼š

```
âœ— é™æ€åˆ†æï¼šå¤±è´¥
var foo = Foo<Object>();
```
## ä½¿ç”¨æ³›å‹æ–¹æ³•
æ–¹æ³•å’Œå‡½æ•°ä¹Ÿå…è®¸ç±»å‹å‚æ•°ï¼š
```dart
T first<T>(List<T> ts) {
  // Do some initial work or error checking, then...
  T tmp = ts[0];
  // Do some additional checking or processing...
  return tmp;
}
```
è¿™é‡Œ`first`(`T`)ä¸Šçš„æ³›å‹ç±»å‹å‚æ•°å…è®¸æ‚¨åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨ç±»å‹å‚æ•°`<T>`ï¼š

- åœ¨å‡½æ•°çš„è¿”å›ç±»å‹ä¸­ï¼ˆ`T`ï¼‰ã€‚
- åœ¨å‚æ•°ç±»å‹ä¸­ï¼ˆ`List<T>`ï¼‰ã€‚
- åœ¨å±€éƒ¨å˜é‡çš„ç±»å‹ä¸­ï¼ˆ`T tmp`ï¼‰ã€‚


# åˆ«å (Typedefs)

ç±»å‹åˆ«åï¼ˆé€šå¸¸ç§°ä¸º_typedef_Â ï¼Œå› ä¸ºå®ƒæ˜¯ç”¨å…³é”®å­—å£°æ˜çš„`typedef`ï¼‰æ˜¯ä¸€ç§å¼•ç”¨ç±»å‹çš„ç®€æ´æ–¹å¼ã€‚ä»¥ä¸‹æ˜¯å£°æ˜å’Œä½¿ç”¨åä¸º`IntList`çš„ç±»å‹åˆ«åçš„ç¤ºä¾‹ï¼š
```dart
typedef IntList = List<int>;
IntList il = [1, 2, 3];
```
ç±»å‹åˆ«åå¯ä»¥æœ‰ç±»å‹å‚æ•°ï¼š
```dart
typedef ListMapper<X> = Map<X, List<X>>;
Map<String, List<String>> m1 = {}; // Verbose.
ListMapper<String> m2 = {}; // Same thing but shorter and clearer.
```
åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨å†…è”å‡½æ•°ç±»å‹ï¼Œè€Œä¸æ˜¯å‡½æ•°çš„ typedefã€‚ä½†æ˜¯ï¼Œå‡½æ•° typedef ä»ç„¶æœ‰ç”¨ï¼š
```dart
typedef Compare<T> = int Function(T a, T b);

int sort(int a, int b) => a - b;

void main() {
  assert(sort is Compare<int>); // True!
}
```

