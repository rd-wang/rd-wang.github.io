---
title: Dart-生成器
date: 2024-11-26 17:15:20 +0800
categories:
  - dart
tags:
  - dart
  - flutter
description: " 当需要延迟生成( lazily produce )一系列值时， 可以考虑使用*生成器函数*。"
math: true
---
> [Dart语言详解](https://rd-wang.github.io/posts/Dart-基础概念和内部原理/)

### 生成器
当需要延迟生成( lazily produce )一系列值时， 可以考虑使用*生成器函数*。 Dart 内置支持两种生成器函数：

 - Synchronous 生成器： 返回一个 Iterable 对象。
 - Asynchronous 生成器： 返回一个 Stream 对象。
 
通过在函数体标记 sync*， 可以实现一个同步生成器函数。 使用 yield 语句来传递值：

```dart
Iterable<int> naturalsTo(int n) sync* {
  int k = 0;
  while (k < n) yield k++;
}
```

通过在函数体标记 async*， 可以实现一个异步生成器函数。 使用 yield 语句来传递值：

```dart
Stream<int> asynchronousNaturalsTo(int n) async* {
  int k = 0;
  while (k < n) yield k++;
}
```

如果生成器是递归的，可以使用 yield* 来提高其性能：

```dart
Iterable<int> naturalsDownFrom(int n) sync* {
  if (n > 0) {
    yield n;
    yield* naturalsDownFrom(n - 1);
  }
}
```

有关生成器的更多信息，请参考文章 [Dart Language Asynchrony Support: Phase 2](https://www.dartcn.com/articles/language/beyond-async) 。

