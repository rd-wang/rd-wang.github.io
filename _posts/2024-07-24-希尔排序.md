---
title: å¸Œå°”æ’åº
date: 2024-7-25 10:48:15 +0800
categories:
  - æ’åºç®—æ³•
tags:
  - æ’åº
  - ç®—æ³•
  - å¸Œå°”æ’åº
description:  1959å¹´Shellå‘æ˜ï¼Œæ˜¯ç®€å•æ’å…¥æ’åºçš„æ”¹è¿›ç‰ˆã€‚æ˜¯ä¸€ç§é«˜æ•ˆçš„æ’åºç®—æ³•ï¼Œé€šè¿‡åˆ†ç»„å’Œé€æ­¥ç¼©å‡å¢é‡ï¼Œä½¿å¾—æ•°ç»„åœ¨æ¥è¿‘æœ‰åºçš„æƒ…å†µä¸‹è¿›è¡Œæœ€ç»ˆæ’åºï¼Œä»è€Œæé«˜æ•ˆç‡ã€‚
math: true
---

# å¸Œå°”æ’åº

å¸Œå°”æ’åºï¼ˆShell Sortï¼‰æ˜¯ä¸€ç§åŸºäºæ’å…¥æ’åºçš„æ’åºç®—æ³•ï¼Œé€šè¿‡ä¼˜åŒ–æ’å…¥æ’åºä¸­çš„æ¯”è¾ƒå’Œç§»åŠ¨æ“ä½œï¼Œå®ç°æ›´é«˜æ•ˆçš„æ’åºã€‚å¸Œå°”æ’åºé€šè¿‡å°†æ•°ç»„åˆ†æˆè‹¥å¹²å­åºåˆ—åˆ†åˆ«è¿›è¡Œæ’å…¥æ’åºï¼Œä½¿å¾—æ•°æ®é¡¹çš„æ­¥é•¿é€æ¸å‡å°‘ï¼Œæœ€ç»ˆè¿›è¡Œä¸€æ¬¡æ™®é€šçš„æ’å…¥æ’åºã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¸Œå°”æ’åºçš„åŸç†ã€æ­¥éª¤ã€ç¤ºä¾‹ã€å¤æ‚åº¦åˆ†æåŠå…¶Javaä»£ç å®ç°ã€‚

## å¸Œå°”æ’åºçš„åŸç†

1. **åˆ†ç»„**ï¼šå°†å¾…æ’åºæ•°ç»„æŒ‰æŸä¸ªå¢é‡åˆ†ç»„ï¼Œå¯¹æ¯ç»„åˆ†åˆ«è¿›è¡Œæ’å…¥æ’åºã€‚
2. **ç¼©å‡å¢é‡**ï¼šé€æ­¥ç¼©å‡å¢é‡ï¼Œé‡å¤ä¸Šè¿°åˆ†ç»„å’Œæ’åºè¿‡ç¨‹ã€‚
3. **æœ€ç»ˆæ’åº**ï¼šå½“å¢é‡ç¼©å‡ä¸º1æ—¶ï¼Œå¯¹æ•´ä¸ªæ•°ç»„è¿›è¡Œä¸€æ¬¡æ™®é€šçš„æ’å…¥æ’åºã€‚

å¸Œå°”æ’åºé€šè¿‡å¤šæ¬¡åˆ†ç»„å’Œæ’åºï¼Œä½¿å¾—æ•°ç»„åœ¨æ¥è¿‘æœ‰åºçš„æƒ…å†µä¸‹è¿›è¡Œæœ€ç»ˆæ’åºï¼Œä»è€Œæé«˜æ•ˆç‡ã€‚

## å¸Œå°”æ’åºçš„æ­¥éª¤

1. **é€‰æ‹©åˆå§‹å¢é‡**ï¼šé€‰æ‹©ä¸€ä¸ªè¾ƒå¤§çš„åˆå§‹å¢é‡ï¼ˆä¸€èˆ¬ä¸ºæ•°ç»„é•¿åº¦çš„ä¸€åŠï¼‰ã€‚
2. **åˆ†ç»„å¹¶æ’å…¥æ’åº**ï¼šæŒ‰å½“å‰å¢é‡å°†æ•°ç»„åˆ†ç»„ï¼Œå¯¹æ¯ç»„åˆ†åˆ«è¿›è¡Œæ’å…¥æ’åºã€‚
3. **ç¼©å‡å¢é‡**ï¼šå°†å¢é‡å‡åŠï¼Œé‡å¤åˆ†ç»„å’Œæ’åºè¿‡ç¨‹ã€‚
4. **æœ€ç»ˆæ’åº**ï¼šå½“å¢é‡ç¼©å‡ä¸º1æ—¶ï¼Œå¯¹æ•´ä¸ªæ•°ç»„è¿›è¡Œä¸€æ¬¡æ’å…¥æ’åºã€‚

## å›¾ç¤º

![å¸Œå°”æ’åº](https://rd-wang.github.io/assets/img/sort/å¸Œå°”æ’åº.gif)

## ç¤ºä¾‹

![å¸Œå°”æ’åºç¤ºä¾‹](https://rd-wang.github.io/assets/img/sort/shell_sort_example.webp)

## æ­¥é•¿

1. Shell çš„åŸå§‹åºåˆ—: $\frac{N}{2}$,$\frac{N}{4}$ , ..., 1 (é‡å¤é™¤ä»¥ 2);
2. Hibbard å¢é‡: 1, 3, 7, ..., $2^k-1$ ;
3. Knuth å¢é‡: 1, 4, 13, ..., $\frac{(3^k-1)}{2}$ ;
4. Sedgewick å¢é‡: 1, 5, 19, 41, 109, ....  
    å®ƒæ˜¯é€šè¿‡å°†ä¸¤ä¸ªåºåˆ—çš„å…ƒç´ äº¤ç»‡å¾—åˆ°çš„:
    
    1, 19, 109, 505, 2161,â€¦.., $9(4^kâ€“2^k)+1$, k = 0, 1, 2, 3,â€¦  
    5, 41, 209, 929, 3905,â€¦.. $2^{k+2}(2^{k+2}â€“3)+1$, k = 0, 1, 2, 3, â€¦
    
## å¤æ‚åº¦åˆ†æ

æ­¥é•¿çš„é€‰æ‹©æ˜¯å¸Œå°”æ’åºçš„é‡è¦éƒ¨åˆ†ã€‚åªè¦æœ€ç»ˆæ­¥é•¿ä¸º1ä»»ä½•æ­¥é•¿åºåˆ—éƒ½å¯ä»¥å·¥ä½œã€‚ç®—æ³•æœ€å¼€å§‹ä»¥ä¸€å®šçš„æ­¥é•¿è¿›è¡Œæ’åºã€‚ç„¶åä¼šç»§ç»­ä»¥ä¸€å®šæ­¥é•¿è¿›è¡Œæ’åºï¼Œæœ€ç»ˆç®—æ³•ä»¥æ­¥é•¿ä¸º1è¿›è¡Œæ’åºã€‚å½“æ­¥é•¿ä¸º1æ—¶ï¼Œç®—æ³•å˜ä¸ºæ™®é€šæ’å…¥æ’åºï¼Œè¿™å°±ä¿è¯äº†æ•°æ®ä¸€å®šä¼šè¢«æ’åºã€‚

Donald Shellæœ€åˆå»ºè®®æ­¥é•¿é€‰æ‹©ä¸º$\frac {n}{2}$å¹¶ä¸”å¯¹æ­¥é•¿å–åŠç›´åˆ°æ­¥é•¿è¾¾åˆ°1ã€‚è™½ç„¶è¿™æ ·å–å¯ä»¥æ¯”$O(n^{2})$ç±»çš„ç®—æ³•ï¼ˆæ’å…¥æ’åºï¼‰æ›´å¥½ï¼Œä½†è¿™æ ·ä»ç„¶æœ‰å‡å°‘å¹³å‡æ—¶é—´å’Œæœ€å·®æ—¶é—´çš„ä½™åœ°ã€‚

|æ­¥é•¿åºåˆ—|æœ€åæƒ…å†µä¸‹å¤æ‚åº¦|
|---|---|
|$\frac {n}{2^{i}}$|$O(n^{2})$|
|$2^{k}-1$|$O(n^{\frac {3}{2}})$|
|$2^{i}3^{j}$|$ğ‘‚(n\log ^{2}n)$|

å·²çŸ¥çš„æœ€å¥½æ­¥é•¿åºåˆ—æ˜¯ç”±Sedgewickæå‡ºçš„(1, 5, 19, 41, 109,...)ã€‚â€œæ¯”è¾ƒåœ¨å¸Œå°”æ’åºä¸­æ˜¯æœ€ä¸»è¦çš„æ“ä½œï¼Œè€Œä¸æ˜¯äº¤æ¢ã€‚â€ç”¨è¿™æ ·æ­¥é•¿åºåˆ—çš„å¸Œå°”æ’åºæ¯”[æ’å…¥æ’åº](https://rd-wang.github.io/posts/æ’å…¥æ’åº/)è¦å¿«ï¼Œç”šè‡³åœ¨å°æ•°ç»„ä¸­æ¯”[å¿«é€Ÿæ’åº](https://rd-wang.github.io/posts/å¿«é€Ÿæ’åº/)å’Œ[å †æ’åº](https://rd-wang.github.io/posts/å †æ’åº/)è¿˜å¿«ï¼Œä½†æ˜¯åœ¨æ¶‰åŠå¤§é‡æ•°æ®æ—¶å¸Œå°”æ’åºè¿˜æ˜¯æ¯”[å¿«é€Ÿæ’åº](https://rd-wang.github.io/posts/å¿«é€Ÿæ’åº/)æ…¢ã€‚

å¦ä¸€ä¸ªåœ¨å¤§æ•°ç»„ä¸­è¡¨ç°ä¼˜å¼‚çš„æ­¥é•¿åºåˆ—æ˜¯[æ–æ³¢é‚£å¥‘æ•°åˆ—](https://rd-wang.github.io/posts/æ–æ³¢é‚£å¥‘æ•°/)é™¤å»0å’Œ1å°†å‰©ä½™çš„æ•°ä»¥é»„é‡‘åˆ†å‰²æ¯”çš„ä¸¤å€çš„å¹‚è¿›è¡Œè¿ç®—å¾—åˆ°çš„æ•°åˆ—ï¼š(1, 9, 34, 182, 836, 4025, 19001, 90358, 428481, 2034035, 9651787, 45806244, 217378076, 1031612713,â€¦)

## æ—¶é—´å¤æ‚åº¦

- **æœ€ä½³æƒ…å†µ**ï¼š $O(n \log^2 n)$
- **æœ€åæƒ…å†µ**ï¼š $O(n^2)$
- **å¹³å‡æƒ…å†µ**ï¼š $O(n^{1.3})$ã€‚
  
## ç©ºé—´å¤æ‚åº¦

- **ç©ºé—´å¤æ‚åº¦**ï¼š$O(1)$ã€‚



## å¸Œå°”æ’åºçš„ä»£ç å®ç°ï¼ˆJavaï¼‰

```java
public class ShellSort {

    // ä¸»æ’åºå‡½æ•°
    public static void shellSort(int[] arr) {
        int n = arr.length;

        // é€‰æ‹©åˆå§‹å¢é‡
        for (int gap = n / 2; gap > 0; gap /= 2) {
            // æŒ‰å¢é‡è¿›è¡Œæ’å…¥æ’åº
            for (int i = gap; i < n; i++) {
                int temp = arr[i];
                int j;
                // æ’å…¥æ’åº
                for (j = i; j >= gap && arr[j - gap] > temp; j -= gap) {
                    arr[j] = arr[j - gap];
                }
                arr[j] = temp;
            }
        }
    }

    // ä¸»å‡½æ•°
    public static void main(String[] args) {
        int[] arr = {38, 27, 43, 3, 9, 82, 10};
        System.out.println("Given Array:");
        for (int num : arr) {
            System.out.print(num + " ");
        }
        System.out.println();

        // è°ƒç”¨å¸Œå°”æ’åºå‡½æ•°
        shellSort(arr);

        System.out.println("\nSorted Array:");
        for (int num : arr) {
            System.out.print(num + " ");
        }
        System.out.println();
    }
}
```
